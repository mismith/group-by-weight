"use strict";angular.module("miUtil",[]).run(["$rootScope","$document","$timeout",function(t,e,n){FastClick&&FastClick.attach(document.body),viewportUnitsBuggyfill&&viewportUnitsBuggyfill.init();var o=t.$menu={active:!1,open:function(t){o.active=!0,t&&t.stopPropagation()},close:function(t){o.active=!1,t&&t.stopPropagation()},toggle:function(t){o.active=!o.active,t&&t.stopPropagation()}};e.on("click",function(){n(function(){o.close()})}),e.on("keyup",function(t){27===t.keyCode&&n(function(){o.close()})}),t.miUtilPreventScrollOnMenuActive=!0,t.$watch("$menu.active",function(e){t.miUtilPreventScrollOnMenuActive&&angular.element(document.body).css({overflow:e?"hidden":""})});var i=t.$modal={active:!1,open:function(t){i.active=t},close:function(){i.active=!1},toggle:function(t){i.active=i.active!==t&&t},isOpen:function(t){return i.active===t}};e.on("keyup",function(t){27===t.keyCode&&n(function(){i.close()})}),t.$watch("$modal.active",function(e){angular.element(document.body).css({overflow:e?"hidden":""}),t.$broadcast("$modal."+(e?"open":"close"))})}]).filter("length",function(){return function(t){return angular.isArray(t)?t.length:angular.isObject(t)?Object.keys(t).filter(function(t){return"$"!=t[0]}).length:0}}).filter("unique",function(){return function(t,e){if(!t)return t;for(var n={},o=[],i=0;i<t.length;i++)n[angular.isFunction(e)?e(t[i]):t[i][e]]=t[i];for(var a in n)o.push(n[a]);return o}}).directive("miIcon",function(){return{scope:{svg:"@",size:"@"},restrict:"E",replace:!0,templateNamespace:"svg",template:'<svg xmlns="http://www.w3.org/2000/svg" class="mi-icon" style="display: inline-block; width: {{ size || 16 }}px; height: {{ size || 16 }}px; fill: currentColor; vertical-align: middle;"><use xlink:href="" /></svg>',link:function(t,e,n){n.$observe("svg",function(t){e.children().attr("xlink:href","assets/icons.svg#"+t)})}}}).directive("miModal",function(){return{scope:{id:"@"},restrict:"E",replace:!0,transclude:!0,template:'<aside ng-show="$modal.isOpen(id)" ng-click="$modal.close()" class="mi-modal-container" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0;">\n\t\t\t\t<div class="mi-modal">\n\t\t\t\t\t<div ng-click="$event.stopPropagation()" class="mi-modal-content" ng-transclude></div>\n\t\t\t\t\t<a ng-click="$modal.close()" class="mi-modal-close">\n\t\t\t\t\t\t<mi-icon svg="x"></mi-icon>\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</aside>'}}).directive("miClickToggle",["$timeout","$parse",function(t,e){return{restrict:"A",link:function(n,o,i){var a=n.$eval(i.miClickToggle);o.on("click",function(o){o.preventDefault(),t(function(){angular.forEach(a,function(t,o){return e(o).assign(n,t)})})}),angular.forEach(a,function(t,e){n.$watch(e,function(e){void 0!==e&&o[t===e?"addClass":"removeClass"](n.$eval(i.miClickToggleActive)||"active")})})}}}]),angular.module("group-by-weight",[]).controller("AppCtrl",["$scope","$timeout","$window",function(t,e,n){function o(t,e){if(t&&e){var n=t.getBoundingClientRect(),o=e.getBoundingClientRect(),i=o.left-(n.left+n.width);return"M0 "+n.top+" C"+i/2+" "+n.top+", "+i/2+" "+o.top+", "+i+" "+o.top+" v"+o.height+" C"+i/2+" "+(o.top+o.height)+", "+i/2+" "+(n.top+n.height)+", 0 "+(n.top+n.height)+" v"+-n.height}}t.groups=[{$id:1,name:"Alcohol",items:[]},{$id:2,name:"Entertainment",items:[]},{$id:0,name:"Food",items:[]},{$id:3,name:"Household",items:[]},{$id:4,name:"Lifestyle",items:[]},{$id:5,name:"Ignore",items:[],background:"rgba(0,0,0,.2)"}],t.colors=[],t.$watch("groups",function(e){t.colors=[];for(var n=0;n<360;n+=360/e.length)t.colors.push("hsla("+n+", "+(90+10*Math.random())+"%, "+(50+10*Math.random())+"%, .2)")});var i=function(e){t.$apply()};angular.element(n).on("load resize",i),t.weightByLength=function(t){return o(document.getElementById("input"+t),document.getElementById("output"+t))},t.weightBySum=function(t){return o(document.getElementById("output"+t),document.getElementById("exput"+t))};var a=[];t.select=function(t,e){var n=a.indexOf(t);return n<0?e?a.push(t):a.splice(0,a.length,t):a.splice(n,1),a},t.selected=function(t){return a.indexOf(t)>=0},t.sum=function(t){return t.$sum=0,t.items.map(function(e){return t.$sum+=e.amount}),t.$sum},t.len=function(t){return t.$len=t.items.length||0},t.abs=function(t){return Math.abs(t)},t.moveItem=function(t,e,n){n.push(t.splice(parseInt(e),1)[0])},t.parseCSV=function(n){var o=new FileReader;o.onload=function(n){e(function(){t.items=[],CSV.parse(n.target.result).map(function(e,n){n&&t.items.push({name:e[4]+"\n"+e[5],date:e[2],amount:parseFloat(e[6].toString().replace(/\(([^\)]+)\)/g,"-$1").replace(/[^\d\.\-]/g,""))})})})},o.readAsText(n[0])}}]).directive("drag",["$rootScope","$parse","$timeout",function(t,e,n){return{restrict:"A",link:function(o,i,a){var r=!0,c=a.dragEffect||"move";i[0].draggable=!0,i.on("dragstart",function(l){r&&(l.stopPropagation(),l.dataTransfer.effectAllowed=c,t.$dragDropData=e(a.drag)(o),i.addClass("dragging"),n(function(){e(a.dragStart)(o,{$event:l,$element:i})}))}),i.on("dragend",function(c){r&&(i.removeClass("dragging"),n(function(){e(a.dragEnd)(o,{$event:c,$element:i,$data:t.$dragDropData}),t.$dragDropData=void 0}))})}}}]).directive("dragDrop",["$rootScope","$parse","$timeout",function(t,e,n){return{restrict:"A",link:function(o,i,a){var r=a.dragEffect||"move";i.on("dragover",function(c){c.preventDefault(),c.stopPropagation(),c.dataTransfer.dropEffect=r,i.addClass("dragover"),n(function(){e(a.dragOver)(o,{$event:c,$element:i,$data:t.$dragDropData})})}),i.on("dragenter",function(r){r.preventDefault(),r.stopPropagation(),i.addClass("dragover"),n(function(){e(a.dragEnter)(o,{$event:r,$element:i,$data:t.$dragDropData})})}),i.on("dragleave",function(r){r.preventDefault(),r.stopPropagation(),i.removeClass("dragover"),n(function(){e(a.dragLeave)(o,{$event:r,$element:i,$data:t.$dragDropData})})}),i.on("drop",function(r){r.preventDefault(),r.stopPropagation(),i.removeClass("dragover"),n(function(){e(a.dragDrop)(o,{$event:r,$element:i,$data:t.$dragDropData})})})}}}]).directive("fileChange",["$parse",function(t){return{restrict:"A",link:function(e,n,o){n.on("change",function(n){t(o.fileChange)(e,{$event:n})})}}}]);